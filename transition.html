<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Transition Po√©tique...</title>
    <style>
        body { margin: 0; overflow: hidden; display: flex; flex-direction: column; justify-content: center; align-items: center; min-height: 100vh; background: #fff; font-family: 'Comic Sans MS', cursive; }
        
        .big-heart { font-size: 15em; color: #FF1493; animation: heartbeat 1.2s infinite alternate, multicolor 3s linear infinite; position: relative; z-index: 10; }
        
        @keyframes heartbeat { from { transform: scale(1); } to { transform: scale(1.15); } }
        
        @keyframes multicolor { 
            0% { color: #FF1493; } 25% { color: #9400D3; } 50% { color: #00BFFF; } 75% { color: #32CD32; } 100% { color: #FF1493; } 
        }

        .trans-element { position: absolute; font-size: 3em; animation: flyToCenter 2.5s ease-out forwards; z-index: 5; }
        
        @keyframes flyToCenter {
            0% { transform: translate(var(--sx), var(--sy)) scale(0); opacity: 0; }
            20% { opacity: 1; scale(1.2); }
            100% { transform: translate(0, 0) scale(0); opacity: 0; }
        }

        .sparkle { position: absolute; font-size: 1.5em; animation: explodeOut 1s ease-out forwards; z-index: 15; }
        
        @keyframes explodeOut {
            0% { transform: translate(0,0) scale(1); opacity: 1; }
            100% { transform: translate(var(--dx), var(--dy)) scale(0); opacity: 0; }
        }
    </style>
</head>
<body>
    <h2 id="msg" style="color: #FF1493; margin-bottom: 20px;">Ouverture du c≈ìur...</h2>
    <div class="big-heart" id="mainHeart">‚ù§Ô∏è</div>

    <script>
        // On r√©cup√®re la destination dans l'URL (ex: transition.html?page=impot.html)
        const urlParams = new URLSearchParams(window.location.search);
        const destination = urlParams.get('page') || 'index.html';
        const heart = document.getElementById('mainHeart');

        // 1. Apport de coeurs et animaux
        const emojis = ['üïäÔ∏è', 'ü¶ã', 'üêù', 'üêû', '‚ù§Ô∏è', 'üíñ'];
        for(let i=0; i<25; i++) {
            setTimeout(() => {
                const el = document.createElement('div');
                el.className = 'trans-element';
                el.innerText = emojis[Math.floor(Math.random()*emojis.length)];
                const angle = Math.random() * Math.PI * 2;
                const dist = 600;
                el.style.setProperty('--sx', Math.cos(angle)*dist + 'px');
                el.style.setProperty('--sy', Math.sin(angle)*dist + 'px');
                el.style.left = "50%"; el.style.top = "50%";
                document.body.appendChild(el);
            }, i * 120);
        }

        // 2. Explosion et Redirection
        setTimeout(() => {
            heart.style.display = 'none';
            document.getElementById('msg').innerText = "Vibration transmise !";
            
            for(let i=0; i<50; i++) {
                const s = document.createElement('div');
                s.className = 'sparkle'; s.innerText = '‚ù§Ô∏è';
                s.style.left = "50%"; s.style.top = "50%";
                s.style.setProperty('--dx', (Math.random()-0.5)*1000 + 'px');
                s.style.setProperty('--dy', (Math.random()-0.5)*1000 + 'px');
                document.body.appendChild(s);
            }

            setTimeout(() => { 
                window.location.href = destination; 
            }, 900);
        }, 3800); // Dur√©e totale entre 3 et 5 secondes
    </script>
</body>
</html>
