<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Semer un Cadeau</title>
    <style>
        body { font-family: 'Comic Sans MS', cursive; background-color: #FFFF00; text-align: center; padding: 20px; }
        .form-container { background: white; padding: 30px; border-radius: 20px; max-width: 500px; margin: auto; border: 4px solid #E67E22; }
        input, textarea { width: 100%; margin: 10px 0; padding: 10px; border-radius: 10px; border: 1px solid #ccc; box-sizing: border-box; }
        button { background: #E67E22; color: white; border: none; padding: 15px 30px; border-radius: 20px; cursor: pointer; font-weight: bold; }
    </style>
</head>
<body>
    <h1>ðŸŒ± Semer une Graine</h1>
    <div class="form-container">
        <form id="seedForm">
            <input type="text" id="nom" placeholder="Ton Nom / Pseudo" required>
            <input type="text" id="ville" placeholder="Ta Ville" required>
            <textarea id="offre" rows="4" placeholder="Que veux-tu offrir sans dÃ©tour ?" required></textarea>
            <button type="submit" id="btnEnvoi">LÃ‚CHER LA GRAINE ðŸŒ»</button>
        </form>
    </div>

    <script>
        const URL_SERVEUR = "https://script.google.com/macros/s/AKfycbz4ncs9qw_AfmKSER5QST-P0OeKQggQaq86QC6liS53uZ9sx4Lo_-4-h1knXKWqgQMc/exec";

        document.getElementById('seedForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const btn = document.getElementById('btnEnvoi');
            btn.innerText = "Envoi en cours...";
            btn.disabled = true;

            const donnees = {
                date: new Date().toLocaleDateString('fr-FR'),
                type: "Cadeau",
                nom: document.getElementById('nom').value,
                localisation: document.getElementById('ville').value,
                message: document.getElementById('offre').value
            };

            fetch(URL_SERVEUR, {
                method: 'POST',
                mode: 'no-cors', // Important pour Google Apps Script
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(donnees)
            }).then(() => {
                alert("Bravo ! Ta graine est enregistrÃ©e.");
                window.location.href = "jardin.html";
            }).catch(err => {
                alert("Erreur d'envoi. RÃ©essaie !");
                btn.disabled = false;
                btn.innerText = "LÃ‚CHER LA GRAINE ðŸŒ»";
            });
        });
    </script>
</body>
</html>
