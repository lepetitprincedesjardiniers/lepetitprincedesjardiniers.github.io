<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Le Jardin - Le Petit Prince International</title>
    <style>
        body { background-color: #FFFF00; color: #000080; font-family: "Comic Sans MS", cursive; text-align: center; margin: 0; }
        nav { background-color: #008080; padding: 10px; margin-bottom: 10px; }
        nav a { color: white; text-decoration: none; margin: 0 15px; font-weight: bold; }
        
        .recherche-zone { 
            background: white; border: 3px solid #E67E22; padding: 20px; 
            width: 90%; max-width: 800px; margin: 20px auto; border-radius: 15px;
        }
        select, input { padding: 12px; margin: 10px; border-radius: 8px; border: 2px solid #008080; font-size: 1em; }
        
        .carte { 
            background: white; border: 2px solid #2E7D32; margin: 20px auto; 
            padding: 20px; width: 85%; max-width: 650px; text-align: left; 
            border-radius: 15px; box-shadow: 5px 5px 15px rgba(0,0,0,0.1);
        }
        .titre { color: #2E7D32; font-weight: bold; font-size: 1.3em; border-bottom: 1px dashed #ccc; }
        .badge-pays { background: #E67E22; color: white; padding: 4px 10px; border-radius: 20px; font-size: 0.8em; float: right; font-weight: bold; }
        #google_translate_element { margin-bottom: 10px; }
    </style>
</head>
<body onload="charger()">

    <nav>
        <a href="index.html">Accueil</a>
        <a href="formulaire.html">Semer un Don</a>
        <a href="jardin.html">Consulter le Jardin</a>
        <a href="contact.html">Contact</a>
    </nav>

    <div id="google_translate_element"></div>

    <font size="6" color="#2E7D32"><u><b>LE JARDIN MONDIAL DES CADEAUX</b></u></font><br>

    <div class="recherche-zone">
        <b>1. Filtrer par Pays :</b><br>
        <select id="filtrePays" onchange="filtrer()" style="width: 90%;">
            <option value="">üåç Tous les pays / All countries</option>
            <option value="Afghanistan">Afghanistan</option>
            <option value="Afrique du Sud">Afrique du Sud</option>
            <option value="Albanie">Albanie</option>
            <option value="Alg√©rie">Alg√©rie</option>
            <option value="Allemagne">Allemagne</option>
            <option value="Andorre">Andorre</option>
            <option value="Angola">Angola</option>
            <option value="Antigua-et-Barbuda">Antigua-et-Barbuda</option>
            <option value="Arabie Saoudite">Arabie Saoudite</option>
            <option value="Argentine">Argentine</option>
            <option value="Arm√©nie">Arm√©nie</option>
            <option value="Australie">Australie</option>
            <option value="Autriche">Autriche</option>
            <option value="Azerba√Ødjan">Azerba√Ødjan</option>
            <option value="Bahamas">Bahamas</option>
            <option value="Bahre√Øn">Bahre√Øn</option>
            <option value="Bangladesh">Bangladesh</option>
            <option value="Barbade">Barbade</option>
            <option value="Belgique">Belgique</option>
            <option value="Belize">Belize</option>
            <option value="B√©nin">B√©nin</option>
            <option value="Bhoutan">Bhoutan</option>
            <option value="Bi√©lorussie">Bi√©lorussie</option>
            <option value="Birmanie">Birmanie</option>
            <option value="Bolivie">Bolivie</option>
            <option value="Bosnie-Herz√©govine">Bosnie-Herz√©govine</option>
            <option value="Botswana">Botswana</option>
            <option value="Br√©sil">Br√©sil</option>
            <option value="Brunei">Brunei</option>
            <option value="Bulgarie">Bulgarie</option>
            <option value="Burkina Faso">Burkina Faso</option>
            <option value="Burundi">Burundi</option>
            <option value="Cambodge">Cambodge</option>
            <option value="Cameroun">Cameroun</option>
            <option value="Canada">Canada</option>
            <option value="Cap-Vert">Cap-Vert</option>
            <option value="Chili">Chili</option>
            <option value="Chine">Chine</option>
            <option value="Chypre">Chypre</option>
            <option value="Colombie">Colombie</option>
            <option value="Comores">Comores</option>
            <option value="Congo-Brazzaville">Congo-Brazzaville</option>
            <option value="Congo-Kinshasa">Congo-Kinshasa</option>
            <option value="Cor√©e du Nord">Cor√©e du Nord</option>
            <option value="Cor√©e du Sud">Cor√©e du Sud</option>
            <option value="Costa Rica">Costa Rica</option>
            <option value="C√¥te d'Ivoire">C√¥te d'Ivoire</option>
            <option value="Croatie">Croatie</option>
            <option value="Cuba">Cuba</option>
            <option value="Danemark">Danemark</option>
            <option value="Djibouti">Djibouti</option>
            <option value="Dominique">Dominique</option>
            <option value="√âgypte">√âgypte</option>
            <option value="√âmirats arabes unis">√âmirats arabes unis</option>
            <option value="√âquateur">√âquateur</option>
            <option value="√ârythr√©e">√ârythr√©e</option>
            <option value="Espagne">Espagne</option>
            <option value="Estonie">Estonie</option>
            <option value="Eswatini">Eswatini</option>
            <option value="√âtats-Unis">√âtats-Unis</option>
            <option value="√âthiopie">√âthiopie</option>
            <option value="Fidji">Fidji</option>
            <option value="Finlande">Finlande</option>
            <option value="France">France</option>
            <option value="Gabon">Gabon</option>
            <option value="Gambie">Gambie</option>
            <option value="G√©orgie">G√©orgie</option>
            <option value="Ghana">Ghana</option>
            <option value="Gr√®ce">Gr√®ce</option>
            <option value="Grenade">Grenade</option>
            <option value="Guatemala">Guatemala</option>
            <option value="Guin√©e">Guin√©e</option>
            <option value="Guin√©e √©quatoriale">Guin√©e √©quatoriale</option>
            <option value="Guin√©e-Bissau">Guin√©e-Bissau</option>
            <option value="Guyana">Guyana</option>
            <option value="Ha√Øti">Ha√Øti</option>
            <option value="Honduras">Honduras</option>
            <option value="Hongrie">Hongrie</option>
            <option value="Inde">Inde</option>
            <option value="Indon√©sie">Indon√©sie</option>
            <option value="Irak">Irak</option>
            <option value="Iran">Iran</option>
            <option value="Irlande">Irlande</option>
            <option value="Islande">Islande</option>
            <option value="Isra√´l">Isra√´l</option>
            <option value="Italie">Italie</option>
            <option value="Jama√Øque">Jama√Øque</option>
            <option value="Japon">Japon</option>
            <option value="Jordanie">Jordanie</option>
            <option value="Kazakhstan">Kazakhstan</option>
            <option value="Kenya">Kenya</option>
            <option value="Kirghizistan">Kirghizistan</option>
            <option value="Kiribati">Kiribati</option>
            <option value="Kowe√Øt">Kowe√Øt</option>
            <option value="Laos">Laos</option>
            <option value="Lesotho">Lesotho</option>
            <option value="Lettonie">Lettonie</option>
            <option value="Liban">Liban</option>
            <option value="Liberia">Liberia</option>
            <option value="Libye">Libye</option>
            <option value="Liechtenstein">Liechtenstein</option>
            <option value="Lituanie">Lituanie</option>
            <option value="Luxembourg">Luxembourg</option>
            <option value="Mac√©doine du Nord">Mac√©doine du Nord</option>
            <option value="Madagascar">Madagascar</option>
            <option value="Malaisie">Malaisie</option>
            <option value="Malawi">Malawi</option>
            <option value="Maldives">Maldives</option>
            <option value="Mali">Mali</option>
            <option value="Malte">Malte</option>
            <option value="Maroc">Maroc</option>
            <option value="Maurice">Maurice</option>
            <option value="Mauritanie">Mauritanie</option>
            <option value="Mexique">Mexique</option>
            <option value="Micron√©sie">Micron√©sie</option>
            <option value="Moldavie">Moldavie</option>
            <option value="Monaco">Monaco</option>
            <option value="Mongolie">Mongolie</option>
            <option value="Mont√©n√©gro">Mont√©n√©gro</option>
            <option value="Mozambique">Mozambique</option>
            <option value="Namibie">Namibie</option>
            <option value="Nauru">Nauru</option>
            <option value="N√©pal">N√©pal</option>
            <option value="Nicaragua">Nicaragua</option>
            <option value="Niger">Niger</option>
            <option value="Nigeria">Nigeria</option>
            <option value="Norv√®ge">Norv√®ge</option>
            <option value="Nouvelle-Z√©lande">Nouvelle-Z√©lande</option>
            <option value="Oman">Oman</option>
            <option value="Ouganda">Ouganda</option>
            <option value="Ouzb√©kistan">Ouzb√©kistan</option>
            <option value="Pakistan">Pakistan</option>
            <option value="Palaos">Palaos</option>
            <option value="Panama">Panama</option>
            <option value="Papouasie-Nouvelle-Guin√©e">Papouasie-Nouvelle-Guin√©e</option>
            <option value="Paraguay">Paraguay</option>
            <option value="Pays-Bas">Pays-Bas</option>
            <option value="P√©rou">P√©rou</option>
            <option value="Philippines">Philippines</option>
            <option value="Pologne">Pologne</option>
            <option value="Portugal">Portugal</option>
            <option value="Qatar">Qatar</option>
            <option value="R√©publique centrafricaine">R√©publique centrafricaine</option>
            <option value="R√©publique dominicaine">R√©publique dominicaine</option>
            <option value="R√©publique tch√®que">R√©publique tch√®que</option>
            <option value="Roumanie">Roumanie</option>
            <option value="Royaume-Uni">Royaume-Uni</option>
            <option value="Russie">Russie</option>
            <option value="Rwanda">Rwanda</option>
            <option value="Saint-Christophe-et-Ni√©v√®s">Saint-Christophe-et-Ni√©v√®s</option>
            <option value="Sainte-Lucie">Sainte-Lucie</option>
            <option value="Saint-Marin">Saint-Marin</option>
            <option value="Saint-Vincent-et-les-Grenadines">Saint-Vincent-et-les-Grenadines</option>
            <option value="Salomon">Salomon</option>
            <option value="Salvador">Salvador</option>
            <option value="Samoa">Samoa</option>
            <option value="Sao Tom√©-et-Principe">Sao Tom√©-et-Principe</option>
            <option value="S√©n√©gal">S√©n√©gal</option>
            <option value="Serbie">Serbie</option>
            <option value="Seychelles">Seychelles</option>
            <option value="Sierra Leone">Sierra Leone</option>
            <option value="Singapour">Singapour</option>
            <option value="Slovaquie">Slovaquie</option>
            <option value="Slov√©nie">Slov√©nie</option>
            <option value="Somalie">Somalie</option>
            <option value="Soudan">Soudan</option>
            <option value="Soudan du Sud">Soudan du Sud</option>
            <option value="Sri Lanka">Sri Lanka</option>
            <option value="Su√®de">Su√®de</option>
            <option value="Suisse">Suisse</option>
            <option value="Suriname">Suriname</option>
            <option value="Syrie">Syrie</option>
            <option value="Tadjikistan">Tadjikistan</option>
            <option value="Tanzanie">Tanzanie</option>
            <option value="Tchad">Tchad</option>
            <option value="Tha√Ølande">Tha√Ølande</option>
            <option value="Timor oriental">Timor oriental</option>
            <option value="Togo">Togo</option>
            <option value="Tonga">Tonga</option>
            <option value="Trinit√©-et-Tobago">Trinit√©-et-Tobago</option>
            <option value="Tunisie">Tunisie</option>
            <option value="Turkm√©nistan">Turkm√©nistan</option>
            <option value="Turquie">Turquie</option>
            <option value="Tuvalu">Tuvalu</option>
            <option value="Ukraine">Ukraine</option>
            <option value="Uruguay">Uruguay</option>
            <option value="Vanuatu">Vanuatu</option>
            <option value="Vatican">Vatican</option>
            <option value="Venezuela">Venezuela</option>
            <option value="Vietnam">Vietnam</option>
            <option value="Y√©men">Y√©men</option>
            <option value="Zambie">Zambie</option>
            <option value="Zimbabwe">Zimbabwe</option>
        </select>

        <br>
        <b>2. Rechercher par Ville ou Mot-cl√© :</b><br>
        <input type="text" id="moteur" onkeyup="filtrer()" placeholder="Ex: Dakar, Montr√©al, Plants..." style="width:85%;">
    </div>

    <div id="status"><b>Chargement du jardin mondial... üåè</b></div>
    <div id="liste"></div>

    <script>
        const url = "https://script.google.com/macros/s/AKfycbwe3bMzbJMUQSEdeyprffw-FQpqLg9-fGcHJi2_1_Ix5kWmrisBoSo2Kzne-CMwe3s/exec";
        let annonces = [];

        async function charger() {
            try {
                const res = await fetch(url);
                annonces = await res.json();
                document.getElementById('status').style.display = 'none';
                afficher(annonces);
            } catch(e) { document.getElementById('status').innerText = "Erreur de connexion."; }
        }

        function afficher(data) {
            const conteneur = document.getElementById('liste');
            conteneur.innerHTML = "";
            [...data].reverse().forEach(a => {
                conteneur.innerHTML += `
                <div class="carte">
                    <span class="badge-pays">${a.pays}</span>
                    <span class="titre">üåø Graine de ${a.prenom}</span><br><br>
                    <b>üìç Ville :</b> ${a.ville} (${a.km} km autour)<br>
                    <p>${a.description}</p>
                    <small>Post√© le : ${new Date(a.date).toLocaleDateString()} | Dur√©e : ${a.duree}</small>
                </div>`;
            });
        }

        function filtrer() {
            const paysChoisi = document.getElementById('filtrePays').value.toLowerCase();
            const motRecherche = document.getElementById('moteur').value.toLowerCase();
            
            const resultat = annonces.filter(a => {
                const matchPays = paysChoisi === "" || (a.pays && a.pays.toLowerCase() === paysChoisi);
                const matchMot = (a.ville && a.ville.toLowerCase().includes(motRecherche)) || 
                                 (a.description && a.description.toLowerCase().includes(motRecherche)) ||
                                 (a.prenom && a.prenom.toLowerCase().includes(motRecherche));
                return matchPays && matchMot;
            });
            
            afficher(resultat);
        }

        // Script Traducteur
        function googleTranslateElementInit() {
            new google.translate.TranslateElement({pageLanguage: 'fr'}, 'google_translate_element');
        }
    </script>
    <script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
</body>
</html>
