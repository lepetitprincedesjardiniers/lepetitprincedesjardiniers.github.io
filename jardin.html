<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Le Jardin - Le Petit Prince</title>
</head>
<body bgcolor="#FFFF00" text="#000080" style="font-family:'Comic Sans MS', cursive; text-align:center; margin:0; padding:0;">

    <center>
        <div id="google_translate_element" style="padding:10px;"></div>

        <table class="notranslate" border="1" cellpadding="10" bgcolor="#008080" style="margin-top:10px; border-radius:10px;">
            <tr>
                <td><a href="index.html" style="text-decoration:none;"><font color="#FFFFFF"><b>Accueil</b></font></a></td>
                <td><a href="formulaire.html" style="text-decoration:none;"><font color="#FFFFFF"><b>Semer</b></font></a></td>
                <td><a href="jardin.html" style="text-decoration:none;"><font color="#FFFFFF"><b>Le Jardin</b></font></a></td>
                <td><a href="contact.html" style="text-decoration:none;"><font color="#FFFFFF"><b>Contact</b></font></a></td>
            </tr>
        </table>

        <br>
        <font size="6" color="#2E7D32">üåª <u><b>LE JARDIN DES GRAINES</b></u> üåª</font>
        <br><br>

        <div id="annonces-container" style="width:90%; max-width:900px;">
            <p><i>Chargement du jardin en cours...</i></p>
        </div>
    </center>

    <script type="text/javascript">
        function googleTranslateElementInit() { new google.translate.TranslateElement({pageLanguage: 'fr'}, 'google_translate_element'); }
    </script>
    <script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

    <script>
        const scriptURL = 'https://script.google.com/macros/s/AKfycbwe3bMzbJMUQSEdeyprffw-FQpqLg9-fGcHJi2_1_Ix5kWmrisBoSo2Kzne-CMwe3s/exec';

        async function chargerJardin() {
            try {
                const response = await fetch(scriptURL);
                const data = await response.json();
                const container = document.getElementById('annonces-container');
                container.innerHTML = "";

                data.forEach(annonce => {
                    const card = document.createElement('div');
                    card.style = "background:white; border:3px solid #2E7D32; border-radius:15px; padding:20px; margin-bottom:25px; text-align:left; box-shadow: 6px 6px 0px #008080;";
                    
                    card.innerHTML = `
                        <font size="5" color="#E67E22"><b>üìç ${annonce.ville} (${annonce.pays})</b></font><br>
                        <div style="background:#F0F9FF; padding:8px; border-radius:8px; margin:10px 0; border-left: 5px solid #008080;">
                            <font size="3" color="#008080"><b>üöÄ Zone d'action :</b> ${annonce.km}</font>
                        </div>
                        <font size="3"><b>Sem√© par :</b> ${annonce.prenom}</font><br>
                        <hr color="#eeeeee">
                        <font size="4">"${annonce.description}"</font><br>
                        <hr color="#eeeeee">
                        <font size="2" color="#666">üìÖ Expire dans : ${annonce.duree} | Le : ${new Date(annonce.date).toLocaleDateString()}</font>
                    `;
                    container.appendChild(card);
                });
            } catch (e) {
                document.getElementById('annonces-container').innerHTML = "<p>Erreur de floraison du jardin.</p>";
            }
        }
        window.onload = chargerJardin;
    </script>
</body>
</html>
