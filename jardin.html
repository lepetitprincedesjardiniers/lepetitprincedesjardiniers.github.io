<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Le Jardin du TrÃ©sor Public</title>
    <style>
        body { 
            font-family: 'Comic Sans MS', cursive; 
            text-align: center; 
            background-color: #FFFF00; 
            color: #000080; 
            margin: 0; padding: 0; 
        }
        
        /* TRADUCTEUR */
        #google_translate_element { padding: 10px; background: rgba(255,255,255,0.5); border-bottom: 2px solid #008080; }

        /* MENU */
        .menu-table { margin: 20px auto; background-color: #008080; border-collapse: collapse; border-radius: 10px; overflow: hidden; }
        .menu-table td { padding: 12px 20px; border: 1px solid #FFFFFF; }
        .menu-table a { text-decoration: none; color: #FFFFFF; font-weight: bold; }

        /* RECHERCHE */
        #searchBox {
            width: 80%; max-width: 400px; padding: 10px; margin: 20px auto;
            border-radius: 20px; border: 3px solid #008080; font-family: inherit;
        }

        /* GRILLE DU JARDIN */
        #jardin-container { 
            display: flex; flex-wrap: wrap; justify-content: center; 
            gap: 20px; padding: 20px; 
        }

        .fleur-carte { 
            background: white; border: 2px solid #008080; border-radius: 15px; 
            padding: 15px; width: 200px; box-shadow: 5px 5px 0px #008080;
            transition: 0.3s;
        }
        .fleur-icone { font-size: 40px; }
        .nom-donneur { font-weight: bold; color: #008080; display: block; margin-top: 5px; }
    </style>
</head>
<body>

    <div id="google_translate_element"></div>
    <script>function googleTranslateElementInit() { new google.translate.TranslateElement({pageLanguage: 'fr'}, 'google_translate_element'); }</script>
    <script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

    <table class="menu-table">
        <tr>
            <td><a href="index.html">Accueil</a></td>
            <td><a href="formulaire.html">Semer</a></td>
            <td><a href="jardin.html">Le Jardin</a></td>
            <td><a href="regulation.html">RÃ©gulation</a></td>
            <td><a href="urgence.html">Urgences</a></td>
        </tr>
    </table>

    <h1>ðŸŒ» Les Graines SemÃ©es au Jardin</h1>
    <p><i>Chaque don est une fleur qui ne se fane jamais.</i></p>

    <input type="text" id="searchBox" onkeyup="filtrerJardin()" placeholder="ðŸ” Chercher un donateur, une ville...">

    <div id="chargement">Le jardin arrose les fleurs...</div>
    <div id="jardin-container"></div>

    <script>
        const URL_SERVEUR = "https://script.google.com/macros/s/AKfycbz4ncs9qw_AfmKSER5QST-P0OeKQggQaq86QC6liS53uZ9sx4Lo_-4-h1knXKWqgQMc/exec";

        // CHARGEMENT DES DONS
        fetch(URL_SERVEUR)
            .then(res => res.json())
            .then(data => {
                const container = document.getElementById('jardin-container');
                document.getElementById('chargement').style.display = 'none';

                // On filtre pour ne garder que les "dons" (graines semÃ©es)
                const dons = data.filter(item => item.type === "Graine" || item.type === "Don").reverse();

                dons.forEach(d => {
                    const div = document.createElement('div');
                    div.className = 'fleur-carte';
                    div.innerHTML = `
                        <div class="fleur-icone">ðŸŒ¸</div>
                        <span class="nom-donneur">${d.nom}</span>
                        <small>${d.localisation}</small>
                        <p style="font-size:0.8em; color:#666;">"${d.message}"</p>
                    `;
                    container.appendChild(div);
                });
            });

        // FILTRE DE RECHERCHE
        function filtrerJardin() {
            let val = document.getElementById('searchBox').value.toLowerCase();
            let fleurs = document.getElementsByClassName('fleur-carte');
            for (let f of fleurs) {
                f.style.display = f.innerText.toLowerCase().includes(val) ? "" : "none";
            }
        }
    </script>
</body>
</html>
