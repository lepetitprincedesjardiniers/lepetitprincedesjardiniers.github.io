<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Le Jardin - Le Petit Prince</title>
</head>
<body bgcolor="#FFFF00" text="#000080" style="font-family:'Comic Sans MS', cursive; text-align:center; margin:0; padding:0;">

    <center>
        <div id="google_translate_element" style="padding:10px;"></div>

        <table class="notranslate" border="1" cellpadding="10" bgcolor="#008080" style="margin-top:10px; border-radius:10px;">
            <tr>
                <td><a href="index.html" style="text-decoration:none;"><font color="#FFFFFF"><b>Accueil</b></font></a></td>
                <td><a href="formulaire.html" style="text-decoration:none;"><font color="#FFFFFF"><b>Semer</b></font></a></td>
                <td><a href="jardin.html" style="text-decoration:none;"><font color="#FFFFFF"><b>Le Jardin</b></font></a></td>
                <td><a href="contact.html" style="text-decoration:none;"><font color="#FFFFFF"><b>Contact</b></font></a></td>
            </tr>
        </table>

        <br>
        <font size="6" color="#2E7D32">üåª <u><b>LE JARDIN DES GRAINES SEM√âES</b></u> üåª</font>
        <br><br>

        <div id="annonces-container" style="width:90%; max-width:900px;">
            <p><i>Chargement des graines en cours...</i></p>
        </div>

    </center>

    <script type="text/javascript">
        function googleTranslateElementInit() { new google.translate.TranslateElement({pageLanguage: 'fr'}, 'google_translate_element'); }
    </script>
    <script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

    <script>
        // On utilise l'URL de ton script Google avec "?action=read" (√† configurer si besoin)
        const scriptURL = 'https://script.google.com/macros/s/AKfycbwe3bMzbJMUQSEdeyprffw-FQpqLg9-fGcHJi2_1_Ix5kWmrisBoSo2Kzne-CMwe3s/exec';

        async function chargerJardin() {
            try {
                const response = await fetch(scriptURL);
                const data = await response.json();
                const container = document.getElementById('annonces-container');
                container.innerHTML = ""; // On vide le message de chargement

                if (data.length === 0) {
                    container.innerHTML = "<p>Le jardin est vide pour l'instant. Soyez le premier √† semer !</p>";
                    return;
                }

                // Affichage des annonces sous forme de jolies cartes
                data.forEach(annonce => {
                    const card = document.createElement('div');
                    card.style = "background:white; border:3px solid #2E7D32; border-radius:15px; padding:15px; margin-bottom:20px; text-align:left; box-shadow: 5px 5px 0px #008080;";
                    
                    card.innerHTML = `
                        <font size="4" color="#E67E22"><b>üìç ${annonce.ville} (${annonce.pays})</b></font><br>
                        <font size="3"><b>Par :</b> ${annonce.prenom}</font><br>
                        <hr color="#eeeeee">
                        <font size="4">"${annonce.description}"</font><br>
                        <hr color="#eeeeee">
                        <font size="2" color="#666">üìÖ Valable : ${annonce.duree} | Sem√©e le : ${new Date(annonce.date).toLocaleDateString()}</font>
                    `;
                    container.appendChild(card);
                });
            } catch (error) {
                document.getElementById('annonces-container').innerHTML = "<p>Le jardin est en pause. Revenez plus tard !</p>";
            }
        }

        window.onload = chargerJardin;
    </script>
</body>
</html>
