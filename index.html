<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Le Tr√©sor Public - Accueil</title>
    <style>
        body { 
            font-family: 'Comic Sans MS', cursive; text-align: center; margin: 0; padding: 0; 
            background-color: #FFFF00; color: #000080; overflow-x: hidden; min-height: 100vh; 
        }
        
        #google_translate_element { padding: 10px; background: rgba(255,255,255,0.5); border-bottom: 1px solid #008080; }
        
        .menu-table { margin: 20px auto; border-radius: 10px; background-color: #008080; border-collapse: collapse; margin: auto; }
        .menu-table td { padding: 10px 15px; border: 1px solid #FFFFFF; }
        .menu-table a { text-decoration: none; color: #FFFFFF; font-weight: bold; }
        
        .soleil-don {
            background: #FFD700; width: 220px; height: 220px; border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            box-shadow: 0 0 40px #FFA500; border: 5px dashed #FF4500;
            margin: 30px auto; cursor: pointer; transition: 0.4s;
            text-decoration: none; color: #000080; font-weight: bold;
        }
        .soleil-don:hover { transform: scale(1.1) rotate(5deg); }

        .bulles-grid { display: flex; justify-content: center; align-items: center; gap: 25px; flex-wrap: wrap; padding: 20px; max-width: 1200px; margin: auto; }
        
        .nuage { 
            background: #e0f7fa; border: 3px solid #008080; border-radius: 50px; padding: 20px; 
            width: 300px; min-height: 200px; text-decoration: none; color: inherit; 
            display: flex; flex-direction: column; justify-content: center; transition: 0.3s; 
        }
        .nuage-rose { background: #ffebee; border-color: #e91e63; }
        .nuage:hover { transform: translateY(-10px); }
        
        .etoile-justice { 
            background: #E6E6FA; border: 3px solid #9370DB; width: 350px; height: 350px; 
            clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%); 
            transition: 0.6s ease-in-out; cursor: pointer; text-decoration: none; color: inherit; 
            display: flex; align-items: center; justify-content: center; 
        }
        .etoile-justice:hover { 
            clip-path: polygon(50% 0%, 100% 0%, 100% 100%, 100% 100%, 100% 100%, 50% 100%, 0% 100%, 0% 100%, 0% 0%, 0% 0%);
            border-radius: 50%; transform: scale(1.05);
        }
        
        .exemples { font-size: 0.85em; color: #2E7D32; font-style: italic; margin-top: 10px; font-weight: bold; }

        /* Animation Messagers fixes √† gauche */
        .animal-container { position: fixed; z-index: 900; pointer-events: none; display: flex; align-items: center; }
        .bulle-texte { 
            background: white; border: 2px solid #2E7D32; border-radius: 15px; padding: 8px 15px; 
            font-weight: bold; opacity: 0; white-space: nowrap; overflow: hidden;
            position: relative; left: 10px;
        }
        
        #coffre-magique { position: fixed; font-size: 60px; z-index: 800; pointer-events: none; left: 50%; transform: translateX(-50%); }

        footer { margin: 60px 0 20px; font-size: 0.9em; }
    </style>
</head>
<body>

    <div id="google_translate_element"></div>
    <script>function googleTranslateElementInit() { new google.translate.TranslateElement({pageLanguage: 'fr'}, 'google_translate_element'); }</script>
    <script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

    <audio id="chantOiseaux" loop><source src="oiseaux.mp3" type="audio/mpeg"></audio>

    <table class="menu-table">
        <tr>
            <td><a href="transition.html?page=index.html">Accueil</a></td>
            <td><a href="transition.html?page=formulaire.html">Semer</a></td>
            <td><a href="transition.html?page=jardin.html">Le Jardin</a></td>
            <td><a href="transition.html?page=impot.html">Imp√¥t Public</a></td>
            <td><a href="transition.html?page=regulation.html">R√©gulation</a></td>
        </tr>
    </table>

    <h1>üíê Le Tr√©sor Public</h1>
    <p><strong>Le Petit Prince des Jardiniers</strong></p>

    <a href="transition.html?page=formulaire.html" class="soleil-don">
        <div>‚òÄÔ∏è<br>ESPACE DU DON ENTIER</div>
    </a>

    <div class="bulles-grid">
        <a href="transition.html?page=impot.html" class="nuage">
            <h3 style="color:#008080; margin:0; text-transform:uppercase;">üìú Imp√¥t Public</h3>
            <p>Travaux publics en libre participation.</p>
            <div class="exemples">Ex : Nettoyage bois communal...</div>
        </a>

        <a href="transition.html?page=regulation.html" class="etoile-justice">
            <div style="width:75%;">
                <h3>‚öñÔ∏è R√©gulation Citoyenne</h3>
                <p>Justice avec d√©licatesse.</p>
            </div>
        </a>

        <a href="transition.html?page=urgence.html" class="nuage nuage-rose">
            <h3 style="color:#e91e63; margin:0;">‚ù§Ô∏è Urgence & √âcoute</h3>
            <p>Besoins vitaux.</p>
        </a>
    </div>

    <div id="coffre-magique">üéÅ</div>

    <footer>¬© 2000 <a href="https://www.youtube.com/channel/UCjsudx7f1sl7XQM8ylcBRdQ" target="_blank" style="color: inherit;">Le petit prince des jardiniers</a></footer>

    <script>
        const basePhrases = ["L'Imp√¥t Public est un geste de c≈ìur", "Besoin d'aide administrative ?", "Graines de g√©n√©rosit√©", "Le pardon est justice", "Besoin d'un c√¢lin"];
        let disponibles = [...basePhrases];
        const typesAnimaux = ['üïäÔ∏è', 'ü¶ã', 'üêù', 'üêû'];
        let messagerActif = null;
        let count = 0;
        
        const coffre = document.getElementById('coffre-magique');
        let coffreX = window.innerWidth / 2 - 30;
        let coffreY = window.innerHeight - 150;

        document.addEventListener('click', () => { 
            const a = document.getElementById('chantOiseaux');
            if(a.paused) { a.volume = 0.05; a.play(); } 
        });

        function exploserEtEnvoler() {
            for (let i = 0; i < 20; i++) {
                const p = document.createElement('div');
                p.innerHTML = ['‚ù§Ô∏è', '‚ú®', 'üå∏', 'üåü'][Math.floor(Math.random() * 4)];
                p.style.position = 'fixed'; p.style.left = (coffreX + 30) + 'px'; p.style.top = (coffreY + 30) + 'px';
                p.style.fontSize = '25px'; p.style.zIndex = '1000'; document.body.appendChild(p);
                const angle = Math.random() * Math.PI * 2; const dist = Math.random() * 180;
                p.animate([{ transform: 'translate(0, 0) scale(1)', opacity: 1 }, { transform: `translate(${Math.cos(angle)*dist}px, ${Math.sin(angle)*dist}px) scale(0)`, opacity: 0 }], 1000);
                setTimeout(() => p.remove(), 1000);
            }
            coffre.animate([
                { transform: 'translateY(0) scale(1.5)', opacity: 1 },
                { transform: 'translateY(-1200px) scale(0.5)', opacity: 0 }
            ], { duration: 1500, easing: 'ease-in', fill: 'forwards' });
            
            // R√©initialiser le coffre apr√®s l'envol
            setTimeout(() => {
                coffreY = window.innerHeight - 150;
                coffre.style.opacity = "1";
            }, 3000);
        }

        function createMessenger() {
            if (count >= 3 || messagerActif) return;
            const txt = disponibles.splice(Math.floor(Math.random()*disponibles.length), 1)[0];
            const div = document.createElement('div');
            div.className = "animal-container";
            div.innerHTML = `<div class="bulle-texte" style="width:0px">${txt}</div><div style="font-size:60px">${typesAnimaux[Math.floor(Math.random()*4)]}</div>`;
            document.body.appendChild(div);
            
            messagerActif = { el: div, bulle: div.firstChild, x: -200, y: window.innerHeight / 2, tx: 100, state: "ENTR√âE" };
        }

        function loop() {
            if (messagerActif) {
                let m = messagerActif;
                if (m.state === "ENTR√âE") {
                    m.x += (m.tx - m.x) * 0.05;
                    if (Math.abs(m.tx - m.x) < 5) {
                        m.state = "LECTURE";
                        m.bulle.style.opacity = 1;
                        m.bulle.animate([{width: "0px"}, {width: "250px"}], {duration: 500, fill: 'forwards'});
                        
                        // Temps de lecture avant de lancer
                        setTimeout(() => {
                            if(m.state === "LECTURE") m.state = "LANCER";
                        }, 2500);
                    }
                } else if (m.state === "LANCER") {
                    m.state = "PROJECTILE";
                    // Calcul de la trajectoire vers le cadeau
                    const targetX = coffreX - m.x;
                    const targetY = coffreY - m.y;
                    
                    m.bulle.animate([
                        { transform: 'translate(0, 0) scale(1)', opacity: 1 },
                        { transform: `translate(${targetX}px, ${targetY}px) scale(0.2)`, opacity: 0 }
                    ], { duration: 600, easing: 'ease-in', fill: 'forwards' });

                    setTimeout(() => {
                        exploserEtEnvoler();
                        m.state = "SORTIE";
                    }, 600);
                } else if (m.state === "SORTIE") {
                    m.x -= 10;
                    if (m.x < -300) {
                        m.el.remove();
                        messagerActif = null;
                        count++;
                    }
                }
                m.el.style.left = m.x + "px";
                m.el.style.top = (m.y + Math.sin(Date.now()*0.005)*20) + "px";
            }
            
            coffre.style.left = coffreX + "px";
            coffre.style.top = coffreY + "px";
            requestAnimationFrame(loop);
        }

        setInterval(createMessenger, 4000);
        loop();
    </script>
</body>
</html>
