<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Le Tr√©sor Public - Version Chef-d'≈ìuvre</title>
    <style>
        body { 
            font-family: 'Comic Sans MS', cursive; background-color: #FFFF00; 
            color: #000080; margin: 0; text-align: center; overflow-x: hidden; min-height: 100vh;
        }

        /* --- INTRO COEUR --- */
        #intro-layer {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #000; z-index: 10000; display: flex; 
            flex-direction: column; justify-content: center; align-items: center;
            transition: transform 1.2s cubic-bezier(0.8, 0, 0.2, 1);
        }
        .heart {
            width: 100px; height: 90px; background: #ff4d6d; position: relative;
            transform: rotate(-45deg); animation: pulse 1s infinite;
            box-shadow: 0 0 50px #ff4d6d;
        }
        .heart::before, .heart::after {
            content: ""; position: absolute; width: 100px; height: 100px;
            background: #ff4d6d; border-radius: 50%;
        }
        .heart::before { top: -50px; left: 0; }
        .heart::after { left: 50px; top: 0; }
        @keyframes pulse { 0%, 100% { scale: 1; } 50% { scale: 1.1; } }

        /* --- NAVIGATION --- */
        .menu-table { margin: 20px auto; background: #008080; border-radius: 15px; border-collapse: collapse; box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        .menu-table td { padding: 12px 20px; border: 1px solid white; }
        .menu-table a { color: white; text-decoration: none; font-weight: bold; }

        /* --- √âL√âMENTS FIXES --- */
        #coffre-magique { position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); font-size: 60px; z-index: 800; cursor: pointer; filter: drop-shadow(0 0 10px gold); }

        /* --- GRILLE STELLAIRE --- */
        .bulles-grid {
            display: flex; justify-content: center; align-items: center;
            gap: 25px; padding: 40px; flex-wrap: wrap;
        }

        .nuage {
            background: white; border-radius: 50px; padding: 25px; width: 250px; min-height: 150px;
            border: 3px solid #87CEEB; box-shadow: 8px 8px 0px #87CEEB; transition: 0.3s;
        }
        .nuage:hover { transform: translateY(-10px); background: #f0faff; }

        .etoile-justice {
            background: #E6E6FA; border: 3px solid #9370DB;
            clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%);
            width: 350px; height: 350px; display: flex; align-items: center; justify-content: center;
            transition: 0.5s ease-in-out; cursor: pointer; z-index: 10;
        }
        .etoile-justice:hover { transform: scale(1.25); background: #f3f0ff; z-index: 50; }

        /* --- DONN√âES DYNAMIQUES --- */
        .carte { 
            background: white; margin: 15px auto; max-width: 700px; padding: 20px; 
            text-align: left; border-radius: 20px; border-left: 15px solid #008080;
            box-shadow: 5px 10px 25px rgba(0,0,0,0.08); transition: 0.3s;
        }
        .carte:hover { transform: scale(1.02); }
    </style>
</head>
<body>

    <div id="intro-layer">
        <div class="heart"></div>
        <h1 style="color:white; margin-top:60px; letter-spacing:3px;">LE TR√âSOR S'OUVRE</h1>
    </div>

    <table class="menu-table">
        <tr>
            <td><a href="index.html">Accueil</a></td>
            <td><a href="formulaire.html">Semer üå±</a></td>
            <td><a href="jardin.html">Jardin üåª</a></td>
            <td><a href="urgence.html">Aider üö®</a></td>
        </tr>
    </table>

    <div class="bulles-grid">
        <div class="nuage">
            <h3 style="color: #008080;">üìú GESTION</h3>
            <p style="font-size: 0.9em;">Travaux collectifs & Bois communal.</p>
        </div>

        <div class="etoile-justice">
            <div style="width: 60%; pointer-events: none;">
                <h3 style="margin:0;">‚öñÔ∏è JUSTICE</h3>
                <p style="font-size: 0.8em;">R√©gulation citoyenne.<br>Le pardon est notre force.</p>
            </div>
        </div>

        <div class="nuage" style="border-color: #e91e63; box-shadow: 8px 8px 0px #e91e63;">
            <h3 style="color: #e91e63;">‚ù§Ô∏è URGENCES</h3>
            <p style="font-size: 0.9em;">Besoins vitaux & Soutien moral.</p>
        </div>
    </div>

    <div id="conteneur-vie">
        <p>Chargement des ondes du jardin...</p>
    </div>

    <div id="coffre-magique" onclick="alert('Merci de cultiver ce jardin !')">üéÅ</div>

    <script>
        // Intro
        setTimeout(() => {
            document.getElementById('intro-layer').style.transform = 'translateY(100%)';
        }, 2000);

        // Fetch des donn√©es r√©elles
        const URL_SERVEUR = "https://script.google.com/macros/s/AKfycbz4ncs9qw_AfmKSER5QST-P0OeKQggQaq86QC6liS53uZ9sx4Lo_-4-h1knXKWqgQMc/exec";

        fetch(URL_SERVEUR)
            .then(res => res.json())
            .then(data => {
                const zone = document.getElementById('conteneur-vie');
                zone.innerHTML = "";
                data.reverse().forEach(item => {
                    const div = document.createElement('div');
                    div.className = 'carte';
                    let col = item.type.toLowerCase().includes("urgence") ? "#e91e63" : "#008080";
                    div.style.borderLeftColor = col;
                    div.innerHTML = `<b style="color:${col}">${item.type.toUpperCase()}</b> - ${item.nom}<br><small>${item.localisation}</small><p>${item.message}</p>`;
                    zone.appendChild(div);
                });
            });
    </script>
</body>
</html>
