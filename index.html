<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Le Tr√©sor Public - Le Petit Prince des Jardiniers</title>
    <style>
        /* Design Global */
        body { 
            font-family: 'Comic Sans MS', cursive; 
            text-align: center; 
            margin: 0; 
            padding: 0; 
            background-color: #FFFF00; 
            color: #000080; 
            overflow-x: hidden; 
            min-height: 100vh; 
        }

        /* Traducteur Google */
        #google_translate_element { 
            padding: 10px; 
            background: rgba(255,255,255,0.5); 
            border-bottom: 1px solid #008080; 
            min-height: 40px; 
        }

        /* Menu de Navigation */
        .menu-table { 
            margin: 20px auto; 
            border-radius: 10px; 
            background-color: #008080; 
            border-collapse: collapse; 
        }
        .menu-table td { padding: 10px 15px; border: 1px solid #FFFFFF; }
        .menu-table a { text-decoration: none; color: #FFFFFF; font-weight: bold; }

        /* Soleil Central - Don Entier */
        .soleil-don {
            background: #FFD700; 
            width: 250px; 
            height: 250px; 
            border-radius: 50%;
            display: flex; 
            align-items: center; 
            justify-content: center;
            box-shadow: 0 0 50px #FFA500; 
            border: 5px dashed #FF4500;
            margin: 40px auto; 
            cursor: pointer; 
            transition: 0.4s;
            text-decoration: none; 
            color: #000080; 
            font-weight: bold;
        }
        .soleil-don:hover { transform: scale(1.1) rotate(5deg); }

        /* Grilles et Bulles Interm√©diaires */
        .bulles-grid { 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            gap: 30px; 
            flex-wrap: wrap; 
            padding: 20px; 
            max-width: 1200px; 
            margin: auto; 
        }
        
        .nuage {
            background: #e0f7fa; 
            border: 3px solid #008080; 
            border-radius: 50px; 
            padding: 25px; 
            width: 320px; 
            min-height: 220px; 
            transition: 0.3s;
            text-decoration: none; 
            color: inherit; 
            display: flex; 
            flex-direction: column; 
            justify-content: center;
        }
        .nuage-rose { background: #ffebee; border-color: #e91e63; }
        .nuage:hover { transform: translateY(-10px); box-shadow: 0 10px 20px rgba(0,0,0,0.1); }

        /* √âtoile de R√©gulation Citoyenne */
        .etoile-justice {
            background: #E6E6FA; 
            border: 3px solid #9370DB; 
            width: 350px; 
            height: 350px;
            clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%);
            transition: 0.5s; 
            cursor: pointer; 
            text-decoration: none; 
            color: inherit;
            display: flex; 
            align-items: center; 
            justify-content: center;
        }
        .etoile-justice:hover { 
            transform: scale(1.1); 
            background: #f3f0ff; 
            clip-path: circle(50% at 50% 50%); 
        }
        .etoile-contenu { width: 70%; }

        .exemples { 
            font-size: 0.85em; 
            color: #2E7D32; 
            font-style: italic; 
            margin-top: 10px; 
            font-weight: bold; 
        }

        /* Syst√®me des Messagers Anim√©s */
        .animal-container { 
            position: fixed; 
            z-index: 900; 
            pointer-events: none; 
            display: flex; 
            align-items: center; 
        }
        .bulle-texte { 
            background: white; 
            border: 2px solid #2E7D32; 
            border-radius: 15px; 
            padding: 8px 15px; 
            font-weight: bold; 
            opacity: 0; 
            overflow: hidden; 
            max-width: 250px; 
            white-space: normal;
        }
        
        #coffre-magique { 
            position: fixed; 
            bottom: 20px; 
            left: 50%; 
            transform: translateX(-50%); 
            font-size: 60px; 
            z-index: 800; 
            transition: 0.3s;
        }
        .pop { transform: translateX(-50%) scale(1.4) !important; }

        /* Confettis de fleurs */
        .confetti { 
            position: fixed; 
            z-index: 799; 
            pointer-events: none; 
            animation: fly 2s ease-out forwards; 
        }
        @keyframes fly { 
            0% { transform: translate(0, 0) rotate(0deg); opacity: 1; } 
            100% { transform: translate(var(--dx), var(--dy)) rotate(360deg); opacity: 0; } 
        }

        /* Pied de page */
        footer { margin: 80px 0 30px; font-size: 0.9em; opacity: 0.8; }
        footer a { color: inherit; text-decoration: none; border-bottom: 1px dashed #008080; }
    </style>
</head>
<body>

    <div id="google_translate_element"></div>
    <script type="text/javascript">
        function googleTranslateElementInit() { 
            new google.translate.TranslateElement({pageLanguage: 'fr'}, 'google_translate_element'); 
        }
    </script>
    <script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

    <audio id="chantOiseaux" loop><source src="oiseaux.mp3" type="audio/mpeg"></audio>

    <table class="menu-table">
        <tr>
            <td><a href="index.html">Accueil</a></td>
            <td><a href="formulaire.html">Semer</a></td>
            <td><a href="jardin.html">Le Jardin</a></td>
            <td><a href="contact.html">Contact</a></td>
        </tr>
    </table>

    <h1>üí∞ Le Tr√©sor Public</h1>
    <p><strong>Le Petit Prince des Jardiniers</strong></p>

    <a href="formulaire.html" class="soleil-don">
        <div>
            ‚òÄÔ∏è<br>ESPACE DU DON ENTIER<br>
            <span style="font-weight: normal; font-size: 0.8em;">Zone g√©n√©reuse du cadeau entier.<br>Pas de retour attendu.</span>
        </div>
    </a>

    <div class="bulles-grid">
        <a href="temps-public.html" class="nuage">
            <h3 style="color: #008080; margin: 0;">üìú Espace Temps Public</h3>
            <p style="margin: 10px 0;">Travaux publics de libre participation.</p>
            <div class="exemples">
                Nettoyage du bois communal, r√©fection de la route, volontariat d'urgence...
            </div>
        </a>

        <a href="regulation.html" class="etoile-justice">
            <div class="etoile-contenu">
                <h3 style="margin: 0;">‚öñÔ∏è R√©gulation Citoyenne</h3>
                <p style="margin: 10px 0; font-size: 0.9em;">Soutien, sentence ou pardon. La justice avec d√©licatesse.</p>
                <div class="exemples">Expose ton conflit √† la communaut√©.</div>
            </div>
        </a>

        <a href="urgence.html" class="nuage nuage-rose">
            <h3 style="color: #e91e63; margin: 0;">‚ù§Ô∏è Urgence & √âcoute</h3>
            <p style="margin: 10px 0;">Besoins vitaux et aide aux projets.</p>
            <div class="exemples">
                Aide charpente, besoin d'un c√¢lin, recherche farine pour le pain...
            </div>
        </a>
    </div>

    <div id="coffre-magique">üéÅ</div>

    <footer>
        <p>¬© 2000 <a href="https://www.youtube.com/channel/UCjsudx7f1sl7XQM8ylcBRdQ" target="_blank">Le petit prince des jardiniers</a></p>
    </footer>

    <script>
        // --- CONFIGURATION ---
        const basePhrases = [
            "Bienvenue au Tr√©sor Public", 
            "L'imp√¥t est un geste de c≈ìur", 
            "L'√©toile √©clot pour vous √©couter",
            "Ici, on s√®me des graines de g√©n√©rosit√© pour r√©colter de l'altruisme",
            "Attention : zone de gratuit√© absolue pour cadeau r√©ellement efficace",
            "La meilleure justice est encore le pardon",
            "Mon c≈ìur a besoin d'un c√¢lin",
            "Recherche farine pour le pain quotidien"
        ];

        let disponibles = [...basePhrases];
        const typesAnimaux = ['üïäÔ∏è', 'ü¶ã', 'üêù', 'üêû'];
        const fleurs = ['üå∏', 'üåº', 'üåª', 'üå∫'];
        const messagers = [];
        const coffre = document.getElementById('coffre-magique');
        const audio = document.getElementById('chantOiseaux');

        // Activer l'audio au premier clic
        document.addEventListener('click', () => { 
            if(audio.paused) { audio.volume = 0.05; audio.play(); } 
        });

        // --- FONCTIONS ---
        function createConfetti() {
            for(let i=0; i<15; i++) {
                const c = document.createElement('div');
                c.className = 'confetti';
                c.innerText = fleurs[Math.floor(Math.random()*fleurs.length)];
                c.style.left = "50%"; c.style.bottom = "60px";
                c.style.setProperty('--dx', (Math.random()*400 - 200) + "px");
                c.style.setProperty('--dy', (Math.random()*-400 - 100) + "px");
                document.body.appendChild(c);
                setTimeout(() => c.remove(), 2000);
            }
        }

        function getRandomEdge() {
            const side = Math.floor(Math.random() * 4);
            if(side === 0) return {x: -250, y: Math.random() * window.innerHeight};
            if(side === 1) return {x: window.innerWidth + 250, y: Math.random() * window.innerHeight};
            if(side === 2) return {x: Math.random() * window.innerWidth, y: -250};
            return {x: Math.random() * window.innerWidth, y: window.innerHeight + 250};
        }

        function createMessenger() {
            if (disponibles.length === 0) return; // Ne pas cr√©er si pas de texte unique dispo
            
            const start = getRandomEdge();
            const phraseIdx = Math.floor(Math.random() * disponibles.length);
            const texte = disponibles.splice(phraseIdx, 1)[0];

            const container = document.createElement('div');
            container.className = "animal-container";
            container.innerHTML = `<div class="bulle-texte" style="width:0px; opacity:0;">${texte}</div>
                                   <div style="font-size:50px">${typesAnimaux[Math.floor(Math.random()*4)]}</div>`;
            document.body.appendChild(container);

            messagers.push({
                el: container,
                bulle: container.firstChild,
                texte: texte,
                x: start.x, y: start.y,
                tx: window.innerWidth / 2, ty: window.innerHeight - 110,
                state: "IN",
                seed: Math.random() * 1000
            });
        }

        function loop() {
            for (let i = messagers.length - 1; i >= 0; i--) {
                let m = messagers[i];

                if (m.state === "IN") {
                    // Aller vers le coffre
                    m.x += (m.tx - m.x) * 0.012;
                    m.y += (m.ty - m.y) * 0.012;
                    m.bulle.style.opacity = "1";
                    
                    // Ouverture progressive de la bulle
                    let currentW = parseInt(m.bulle.style.width) || 0;
                    if (currentW < 220) m.bulle.style.width = (currentW + 2) + "px";

                    if (Math.abs(m.tx - m.x) < 20 && Math.abs(m.ty - m.y) < 20) {
                        m.state = "WAIT";
                        coffre.classList.add('pop');
                        createConfetti();
                        setTimeout(() => {
                            m.state = "OUT";
                            coffre.classList.remove('pop');
                            const exit = getRandomEdge();
                            m.tx = exit.x; m.ty = exit.y;
                            m.bulle.style.opacity = "0";
                        }, 4000); // Temps de lecture
                    }
                } else if (m.state === "OUT") {
                    // Sortir de l'√©cran
                    m.x += (m.tx - m.x) * 0.02;
                    m.y += (m.ty - m.y) * 0.02;
                    if (m.x < -300 || m.x > window.innerWidth + 300 || m.y < -300 || m.y > window.innerHeight + 300) {
                        disponibles.push(m.texte); // Lib√©rer le texte
                        m.el.remove();
                        messagers.splice(i, 1);
                    }
                }

                // Animation de flottement
                const float = Math.sin(Date.now() * 0.005 + m.seed) * 15;
                m.el.style.left = m.x + "px";
                m.el.style.top = (m.y + float) + "px";
            }
            requestAnimationFrame(loop);
        }

        // Lancement
        setInterval(createMessenger, 5000); 
        createMessenger(); // Premier oiseau imm√©diat
        loop();
    </script>
</body>
</html>
